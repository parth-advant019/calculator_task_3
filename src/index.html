<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Calculator</title>
    <link href="./output.css" rel="stylesheet">
    
</head>

    <body class="bg-gray-900 flex items-center justify-center min-h-screen">
        <div class="bg-gray-700 p-8 rounded-lg shadow-2xl max-w-sm w-full">
            <h2 class="text-center text-3xl text-white mb-6 font-bold">Calculator</h2>

            <input
              id="display"
              type="text"
              readonly
              class="w-full mb-4 p-3 text-right text-2xl rounded-lg bg-slate-900 text-white outline-none"
              value="0"
            />

            <!---->
            <div class="grid grid-cols-4 gap-3">
              <button onclick="AllClear()" class="bg-yellow-500 col-span-2">AC</button>
              <button onclick="Eraser()" class="bg-yellow-500 col-span-2">Clear</button>

              <button onclick="squareRoot()" class="bg-slate-500 text-white">√</button>
              <button onclick="power()" class="bg-slate-500 text-white">x²</button>
              <button onclick="setPower()" class="bg-slate-500 text-white">xʸ</button>

              <button onclick="Percentage()" class="bg-slate-500 text-white">%</button>
              

              <button onclick="sin()" class="bg-slate-500 text-white">sin</button>
              <button onclick="cos()" class="bg-slate-500 text-white">cos</button>
              <button onclick="tan()" class="bg-slate-500 text-white">tan</button>


              <button onclick="setOperator('/')" class="bg-slate-500 text-white">÷</button>

              <button onclick="appendNumber('7')" class="bg-slate-500 text-white">7</button>
              <button onclick="appendNumber('8')" class="bg-slate-500 text-white">8</button>
              <button onclick="appendNumber('9')" class="bg-slate-500 text-white">9</button>
              <button onclick="setOperator('*')" class="bg-slate-500 text-white">x</button>

              <button onclick="appendNumber('4')" class="bg-slate-500 text-white">4</button>
              <button onclick="appendNumber('5')" class="bg-slate-500 text-white">5</button>
              <button onclick="appendNumber('6')" class="bg-slate-500 text-white">6</button>
              <button onclick="setOperator('-')" class="bg-slate-500 text-white">-</button>

              <button onclick="appendNumber('1')" class="bg-slate-500 text-white">1</button>
              <button onclick="appendNumber('2')" class="bg-slate-500 text-white">2</button>
              <button onclick="appendNumber('3')" class="bg-slate-500 text-white">3</button>
              <button onclick="setOperator('+')" class="bg-slate-500 text-white">+</button>

              <button onclick="appendNumber('0')" class="bg-slate-500 text-white">0</button>
              <button onclick="appendDecimal()" class="bg-slate-500 text-white">.</button>

              <button onclick="calculate()" class="bg-slate-500 text-white col-span-2">=</button>

              





              
              


            </div>
            
            

            
        </div>

        <script>
           let justCalculated = false;


           const display = document.getElementById("display");

           let firstNumber = "";
           let secondNumber = "";
           let operator = "";
           let isSecond = false;

           

           function appendNumber(num){

            //for = to

            if(justCalculated && !isSecond){
              firstNumber = num;
              display.value = firstNumber;
              justCalculated = false;
              return;
            }
             // normal append
            if(!isSecond){
              firstNumber += num;
              display.value = firstNumber;
            }else{
              secondNumber += num;
              
              display.value = firstNumber + " " + operator + " " + secondNumber;
            }

           }

           function setOperator(op) {
            if (firstNumber === "") return;
            operator = op;
            isSecond = true

            display.value = firstNumber + " " + operator;

           }

           function appendDecimal(){
            if(!isSecond){
              if(!firstNumber.includes(".")){
                if (firstNumber === "") {
                    firstNumber = "0";
                }

                firstNumber += ".";
                display.value =firstNumber;
              }
            }
            else{
              if(!secondNumber.includes(".")){
                if (secondNumber === "") {
                    secondNumber = "0";
                }

                secondNumber += ".";
                display.value = firstNumber + " " + operator + " " + secondNumber;
              }
            }
           }

           function AllClear(){
            firstNumber = "";
            secondNumber = "";
            operator = "";
            isSecond = false;
            display.value = "0";

           }

           function Eraser(){
            //for first number
            if (!isSecond) {
              firstNumber = firstNumber.slice(0, -1);
              display.value = firstNumber || "0";
              return;

            }
            //remove operator only
            if(isSecond && secondNumber === ""){
              operator = "";
              isSecond = false; //state goes to first num true part
              display.value = firstNumber;
              return;

            }
            //for second number
            secondNumber = secondNumber.slice(0,-1);
            display.value = secondNumber 
              ? firstNumber + " " + operator + " " +secondNumber : firstNumber + " " + operator; //tearnari op

           }

           function calculate(){
             if(firstNumber === "" || secondNumber === "" || operator === "") return;

             let result;

             const num1 = parseFloat(firstNumber);
             const num2 = parseFloat(secondNumber);

             switch (operator){
              
              case "+":
                result = num1 + num2;
                break;
              case "-":
                result = num1 - num2;
                break;
              case "*":
                result = num1 * num2;
                break;
              case "/":
                result = num2 === 0 ? "Error" : num1 / num2;
                break;
              case "^":
                result = Math.pow(num1,num2);
                break;




             }
             
             display.value = result;

             firstNumber = result.toString();
             secondNumber = "";
             operator = "";
             isSecond = false;

            justCalculated = true;

             

           }

           //squareRoot

           function squareRoot(){

            if (isSecond && secondNumber !== ""){
              alert("This work only in one digit number");
              return;
            }
            

            //apply first num
            if(firstNumber !== ""){
              let value = parseFloat(firstNumber);
             
              if(value < 0){
                display.value = "Error";
                return 0;

              }
              let result = Math.sqrt(value);
              firstNumber = result.toString();

              display.value = firstNumber;
              operator = "";
              secondNumber = "";
              isSecond=false;
              justCalculated=true;

            }


           }

           function power(){
            
            //for second num
            if (isSecond && secondNumber !== ""){
              alert("This work only in one digit number");
              return;
            }
            
            

            //for first num
            if(firstNumber !== ""){
              let value = parseFloat(firstNumber);
             
              if(value < 0){
                display.value = "Error";
                return 0;

              }
              let result = Math.pow(value,2);
              firstNumber = result.toString();

              display.value = firstNumber;
              operator = "";
              secondNumber = "";
              isSecond=false;
              justCalculated=true;
            
            }
            

           }

           function Percentage(){
              if (!isSecond) {
              let value = parseFloat(firstNumber);
              let result = value / 100;

              firstNumber = result.toString();
              display.value = firstNumber;

              justCalculated = true;
            }

           }

           //Trigonometric 
           function toRadians(deg) {
              return deg * (Math.PI / 180);
            }

            //sin
          function sin(){
            if(firstNumber !== ""){
              let value = parseFloat(firstNumber);
              let result = Math.sin(toRadians(value));

              firstNumber = result.toString();
              display.value = firstNumber;

              operator = "";
              secondNumber = "";
              isSecond = false;
              justCalculated = true;


              
            }
            
          }

          //cos
          function cos(){
            if(firstNumber !== ""){
              let value = parseFloat(firstNumber);
              let result = Math.sin(toRadians(value));

              firstNumber = result.toString();
              display.value = firstNumber;

              operator = "";
              secondNumber = "";
              isSecond = false;
              justCalculated = true;


              
            }
            
          }
          //tan
          function tan(){
            if(firstNumber !== ""){
              let value = parseFloat(firstNumber);
              let result = Math.sin(toRadians(value));

              firstNumber = result.toString();
              display.value = firstNumber;

              operator = "";
              secondNumber = "";
              isSecond = false;
              justCalculated = true;


              
            }
            
          }

          //x rais to ^ y
          function setPower(){
            if(firstNumber === "")return;
            operator = "^";
            isSecond = true;
            display.value = firstNumber + " ^ ";
          }
          










        </script>
        
    </body>

</html>